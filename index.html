<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Receitas Brasileiras Melhoradas</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Modal overlay */
    #recipeModal {
      background: rgba(0, 0, 0, 0.7);
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
  </style>
</head>
<body class="bg-gray-100 p-6">

  <h1 class="text-3xl font-bold mb-6 text-[#167288] text-center">Receitas Brasileiras</h1>

  <!-- Busca -->
  <div class="max-w-md mx-auto mb-6">
    <input
      type="text"
      id="searchInput"
      placeholder="Busque por nome da receita..."
      class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#167288]"
    />
  </div>

  <!-- Filtros -->
  <div class="max-w-md mx-auto mb-6 flex flex-wrap justify-center gap-2">
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="all">Todas</button>
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="sudeste">Sudeste</button>
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="nordeste">Nordeste</button>
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="sul">Sul</button>
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="norte">Norte</button>
    <button class="filter-btn bg-[#8cdaec] hover:bg-[#167288] text-white font-medium py-2 px-4 rounded-full transition" data-region="centro-oeste">Centro-Oeste</button>
  </div>

  <!-- Grid de Receitas -->
  <section id="recipeGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 max-w-6xl mx-auto"></section>

  <!-- Modal Receita -->
  <div id="recipeModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center p-6" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalInstructions">
    <div class="bg-white rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto relative">
      <button onclick="closeModal()" aria-label="Fechar modal" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-3xl font-bold">&times;</button>
      <img id="modalImage" src="" alt="" class="w-full h-64 object-cover rounded-t-lg" />
      <div class="p-6">
        <h2 id="modalTitle" class="text-3xl font-bold mb-4 text-[#167288]"></h2>
        <h3 class="font-semibold mb-2">Ingredientes:</h3>
        <ul id="modalIngredients" class="list-disc list-inside mb-6 max-h-48 overflow-y-auto"></ul>
        <h3 class="font-semibold mb-2">Modo de preparo:</h3>
        <ol id="modalInstructions" class="list-decimal list-inside mb-6 max-h-48 overflow-y-auto"></ol>
        <p class="italic text-gray-600 mb-6">Dica: <span id="modalTip"></span></p>

        <div class="flex justify-between">
          <button id="prevBtn" class="bg-[#8cdaec] hover:bg-[#167288] text-white font-semibold py-2 px-6 rounded-full transition">Anterior</button>
          <button id="nextBtn" class="bg-[#8cdaec] hover:bg-[#167288] text-white font-semibold py-2 px-6 rounded-full transition">Próximo</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const recipes = {
      feijoada: {
        title: "Feijoada",
        region: "sudeste",
        image: "https://images.unsplash.com/photo-1547592180-85f173990554",
        description: "O prato mais tradicional do Brasil, com feijão preto e diversas carnes.",
        ingredients: [
          "1 kg de feijão preto",
          "100 g de carne seca",
          "70 g de orelha de porco"
        ],
        instructions: [
          "Coloque as carnes de molho por 36 horas ou mais.",
          "Cozinhe tudo junto com o feijão."
        ],
        tip: "Sirva com laranja e couve refogada."
      },
      acaraje: {
        title: "Acarajé",
        region: "nordeste",
        image: "https://images.unsplash.com/photo-1605291567250-6fff7c036bd0",
        description: "Bolinho de origem africana, típico da culinária baiana.",
        ingredients: [
          "500g de feijão fradinho",
          "2 cebolas médias",
          "Sal a gosto"
        ],
        instructions: [
          "Deixe o feijão de molho.",
          "Frite em azeite de dendê."
        ],
        tip: "Sirva quente com vatapá."
      },
      barreado: {
        title: "Barreado",
        region: "sul",
        image: "https://images.unsplash.com/photo-1625938143087-204ca7b9c1c3",
        description: "Cozido de carne típico do litoral paranaense, cozido por horas.",
        ingredients: [
          "1,5 kg de carne bovina",
          "Sal e pimenta a gosto",
          "Farinha de mandioca"
        ],
        instructions: [
          "Tempere a carne e cozinhe por várias horas em panela tampada.",
          "Sirva com farinha de mandioca."
        ],
        tip: "Tradicionalmente cozido em panela de barro."
      },
      tacaca: {
        title: "Tacacá",
        region: "norte",
        image: "https://images.unsplash.com/photo-1585238342024-78d90f061f9e",
        description: "Sopa típica da região norte, feita com tucupi, jambu e camarão.",
        ingredients: [
          "Tucupi",
          "Jambu",
          "Camarão seco",
          "Goma de tapioca"
        ],
        instructions: [
          "Prepare o tucupi e ferva.",
          "Adicione jambu e goma, finalize com camarão."
        ],
        tip: "Coma quente, direto na cuia."
      },
      pamonha: {
        title: "Pamonha",
        region: "centro-oeste",
        image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641",
        description: "Prato feito com milho verde ralado, geralmente cozido em palha de milho.",
        ingredients: [
          "Milho verde ralado",
          "Leite de coco",
          "Sal"
        ],
        instructions: [
          "Misture o milho com leite de coco e sal.",
          "Cozinhe embrulhado em palha de milho."
        ],
        tip: "Ótima para comer no café da manhã."
      },
      baiao: {
        title: "Baião de Dois",
        region: "nordeste",
        image: "https://images.unsplash.com/photo-1601050690597-df0568f70950",
        description: "Mistura de arroz e feijão-de-corda, típico do Nordeste brasileiro.",
        ingredients: [
          "Arroz",
          "Feijão-de-corda",
          "Bacon",
          "Queijo coalho"
        ],
        instructions: [
          "Cozinhe o feijão e o arroz juntos.",
          "Refogue bacon e misture com queijo coalho."
        ],
        tip: "Sirva quente, prato muito nutritivo."
      },
      moqueca: {
        title: "Moqueca Baiana",
        region: "nordeste",
        image: "https://images.unsplash.com/photo-1504674900247-0877df9cc836",
        description: "Peixe cozido com leite de coco, azeite de dendê e temperos.",
        ingredients: [
          "1 kg de peixe em postas",
          "200 ml de leite de coco",
          "2 tomates picados",
          "1 pimentão vermelho picado",
          "1 cebola picada",
          "Coentro",
          "Azeite de dendê",
          "Sal e pimenta"
        ],
        instructions: [
          "Tempere o peixe com sal e pimenta.",
          "Faça camadas de peixe e vegetais na panela.",
          "Adicione leite de coco e azeite de dendê.",
          "Cozinhe em fogo baixo até o peixe ficar macio.",
          "Finalize com coentro."
        ],
        tip: "Sirva com arroz branco e farinha de mandioca."
      },
      paoDeQueijo: {
        title: "Pão de Queijo",
        region: "sudeste",
        image: "https://images.unsplash.com/photo-1590080877777-9d263da99a3f",
        description: "Pãozinho típico mineiro feito com polvilho e queijo.",
        ingredients: [
          "500g de polvilho doce",
          "1 xícara de leite",
          "1/2 xícara de óleo",
          "2 ovos",
          "200g de queijo minas ralado",
          "Sal"
        ],
        instructions: [
          "Ferva leite, óleo e sal.",
          "Despeje sobre o polvilho e misture.",
          "Adicione ovos e queijo, mexa até homogêneo.",
          "Faça bolinhas e asse a 180ºC até dourar."
        ],
        tip: "Coma ainda quentinho, é irresistível."
      },
      cuscuz: {
        title: "Cuscuz Paulista",
        region: "sudeste",
        image: "https://images.unsplash.com/photo-1604908177523-0e4343e67d18",
        description: "Prato feito com farinha de milho, legumes e peixe.",
        ingredients: [
          "1 xícara de farinha de milho",
          "1 cebola picada",
          "1 tomate picado",
          "1/2 pimentão vermelho picado",
          "100g de sardinha",
          "2 ovos cozidos",
          "Azeitonas",
          "Cheiro-verde",
          "Sal e azeite"
        ],
        instructions: [
          "Refogue cebola, tomate e pimentão.",
          "Misture a farinha e acrescente água aos poucos.",
          "Adicione sardinha, ovos, azeitonas e cheiro-verde.",
          "Coloque em forma, pressione e geladeira para firmar."
        ],
        tip: "Sirva frio com salada verde."
      },
      brigadeiro: {
        title: "Brigadeiro",
        region: "sudeste",
        image: "https://images.unsplash.com/photo-1606851090994-10d9a38e13e4",
        description: "Doce típico brasileiro feito com leite condensado e chocolate.",
        ingredients: [
          "1 lata de leite condensado",
          "1 colher de sopa de manteiga",
          "3 colheres de sopa de chocolate em pó",
          "Chocolate granulado para enrolar"
        ],
        instructions: [
          "Misture leite condensado, manteiga e chocolate em pó em uma panela.",
          "Cozinhe em fogo médio, mexendo sempre até desgrudar do fundo.",
          "Deixe esfriar, enrole e passe no granulado."
        ],
        tip: "Sirva gelado, ótimo para festas."
      }
    };

    const recipeGrid = document.getElementById('recipeGrid');
    const searchInput = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.filter-btn');

    const modal = document.getElementById('recipeModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalImage = document.getElementById('modalImage');
    const modalIngredients = document.getElementById('modalIngredients');
    const modalInstructions = document.getElementById('modalInstructions');
    const modalTip = document.getElementById('modalTip');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    let filteredKeys = Object.keys(recipes);
    let currentIndex = 0;

    function createRecipeCard(key) {
      const recipe = recipes[key];
      const card = document.createElement('article');
      card.className = 'bg-white rounded-lg shadow-md cursor-pointer overflow-hidden hover:shadow-xl transition';
      card.setAttribute('tabindex', '0');
      card.setAttribute('role', 'button');
      card.setAttribute('aria-label', `Abrir receita de ${recipe.title}`);

      card.innerHTML = `
        <img src="${recipe.image}" alt="${recipe.title}" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h2 class="text-xl font-bold mb-2 text-[#167288]">${recipe.title}</h2>
          <p class="text-gray-600">${recipe.description}</p>
        </div>
      `;

      card.addEventListener('click', () => openModal(key));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModal(key);
        }
      });

      return card;
    }

    function displayRecipes(keys) {
      recipeGrid.innerHTML = '';
      if (keys.length === 0) {
        recipeGrid.innerHTML = '<p class="col-span-full text-center text-gray-500">Nenhuma receita encontrada.</p>';
        return;
      }
      keys.forEach(key => {
        recipeGrid.appendChild(createRecipeCard(key));
      });
    }

    function filterRecipes() {
      const searchText = searchInput.value.toLowerCase();
      const selectedRegion = document.querySelector('.filter-btn.active')?.dataset.region || 'all';

      filteredKeys = Object.keys(recipes).filter(key => {
        const recipe = recipes[key];
        const matchesSearch = recipe.title.toLowerCase().includes(searchText);
        const matchesRegion = selectedRegion === 'all' || recipe.region === selectedRegion;
        return matchesSearch && matchesRegion;
      });
      displayRecipes(filteredKeys);
    }

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        filterButtons.forEach(btn => btn.classList.remove('active', 'bg-[#167288]'));
        button.classList.add('active', 'bg-[#167288]');
        filterRecipes();
      });
    });

    searchInput.addEventListener('input', filterRecipes);

    // Inicial
    filterButtons[0].classList.add('active', 'bg-[#167288]');
    filterRecipes();

    function openModal(key) {
      currentIndex = filteredKeys.indexOf(key);
      if (currentIndex === -1) currentIndex = 0;
      updateModalContent();
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      modal.querySelector('button[aria-label="Fechar modal"]').focus();
      document.addEventListener('keydown', handleModalKeydown);
    }

    function updateModalContent() {
      const key = filteredKeys[currentIndex];
      const recipe = recipes[key];
      modalTitle.textContent = recipe.title;
      modalImage.src = recipe.image;
      modalImage.alt = recipe.title;
      modalIngredients.innerHTML = recipe.ingredients.map(ing => `<li>${ing}</li>`).join('');
      modalInstructions.innerHTML = recipe.instructions.map(step => `<li>${step}</li>`).join('');
      modalTip.textContent = recipe.tip;
    }

    function closeModal() {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
      document.removeEventListener('keydown', handleModalKeydown);
      searchInput.focus();
    }

    function handleModalKeydown(e) {
      if (e.key === 'Escape') {
        closeModal();
      } else if (e.key === 'ArrowRight') {
        nextRecipe();
      } else if (e.key === 'ArrowLeft') {
        prevRecipe();
      }
    }

    function nextRecipe() {
      currentIndex = (currentIndex + 1) % filteredKeys.length;
      updateModalContent();
    }

    function prevRecipe() {
      currentIndex = (currentIndex - 1 + filteredKeys.length) % filteredKeys.length;
      updateModalContent();
    }

    nextBtn.addEventListener('click', nextRecipe);
    prevBtn.addEventListener('click', prevRecipe);

    // Fecha modal se clicar fora do conteúdo
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });
  </script>
</body>
</html>
